(function(e){e.fn.imglazyload=function(t){var n=e.extend({attr:"lazy-src",container:window,event:"scroll",fadeIn:!0,threshold:10,vertical:!0},t),r=n.event,i=n.vertical,s=e(n.container),o=n.threshold,u=e.makeArray(e(this)),a="imglazyload_offset",f=i?"top":"left",l=i?"scrollTop":"scrollLeft",c=i?s.height():s.width(),h=s[l](),p=c+h,d={init:function(e){return e>=0&&e<=p+o},scroll:function(e){var t=s[l]();return e>=t&&e<=c+t+o},resize:function(e){var t=s[l]();return c=i?s.height():s.width(),e>=t&&e<=c+t+o}},v=function(t,r){var i=0,o=!1,l,c,h,p,v;r?r!=="scroll"&&r!=="resize"&&(o=!0):r="init";for(;i<u.length;i++){l=!1,h=u[i],p=e(h),v=p.attr(n.attr);if(!v||h.src===v)continue;c=p.offset()[f],l=o||d[r](c),l&&(h.src=v,n.fadeIn&&p.hide().fadeIn(),p.removeData(a),u.splice(i--,1))}u.length||(t?t.unbind(r,m):s.unbind(n.event,m),e(window).unbind("resize",m),u=null)},m=function(t){v(e(this),t.type)};return s=r==="scroll"?s:e(this),s.bind(r,m),e(window).bind("resize",m),v(),this}})(jQuery),define("imglazyload",function(){}),define("ulife.business.config",[],function(){var e="www.ucaiyuan.com",t="b&$pcgf^dtP1zHTk",n={_sm:"md5"},r="http://gateway.dev.mbdev.ucaiyuan.com/";document.getElementsByName("restfullApi")[0]&&(r=document.getElementsByName("restfullApi")[0].getAttribute("content")+"/");var i="https://gateway.dev.mbdev.ucaiyuan.com/",s={url:r+"m.api",fileurl:r+"file.api"},o={url:i+"m.api",fileurl:i+"file.api"},u={};return{setting:{none_append_word:t,default_header:n,md5_key:e,api:s,httpsapi:o,link:u}}}),define("ulife.api.security.type",[],function(){return{UserLogin:{name:"UserLogin",code:8192},RegisteredDevice:{name:"RegisteredDevice",code:256},None:{name:"None",code:0}}}),define("ulife.framework.comm",["jquery","jquery.cookie","can","underscore","md5","store","ulife.business.config","ulife.api.security.type"],function(e,t,n,r,i,s,o,u){var a=-360,f=-300,l=-180,c=-160,h=[a,f,l,c],p=n.Construct.extend({api:{},buildRequestData:function(){if(this.api){this.fixture=!1,this.data&&this.data.fixture&&(this.fixture=!0);var t={};r.extend(t,{_mt:this.api.METHOD_NAME}),r.extend(t,this.api.COMMON);var n;for(n in this.api.REQUIRED)t[n]=this.data[n];for(n in this.api.OPTIONAL)t[n]=this.data[n];return r.extend(t,{_idfa:s.get(p._aid+"_idfa")}),e.cookie(p._aid+"_tk")&&r.extend(t,{_tk:e.cookie(p._aid+"_tk")}),t}},init:function(e){this.setData(e)},setData:function(e){this.data=e},sendRequest:function(e,t){s.get(p._aid+"_idfa")||s.set(p._aid+"_idfa",i(Date().valueOf()+window.parseInt(Math.random()*1e4)));var n=this.validate(e);if(n!==!0)return n;var r=this.buildRequestData();return this.request(r,e)},validate:function(e){if(this.api){if(!this.api.METHOD_NAME)return"缺少_mt";for(var t in this.api.REQUIRED)if(!r.has(this.data,t))return new Error("缺少必填字段"+t)}if(this.api.SECURITY_TYPE===u.UserLogin.name&&!this.checkUserLogin()){if(!e)return new Error("该请求需要在登录后发起");this.goToLogin()}return!0},checkUserLogin:function(){return!!e.cookie("2001_tk")},goToLogin:function(){var e=window.location.href;e!==o.setting.login&&(window.location.href="/login?from="+escape(e))},access:function(e,t){if(e.stat.code===0&&e.content[0]&&e.stat.stateList[0].code===0)return!0;if(!r.contains(h,e.stat.code)||!t)return!1;this.goToLogin()},encrypt:function(e,t){var n=[];r.each(e,function(e,t){n.push(t+"="+e)}),n.sort();var s=n.join("");return s+=t,i(s)},sign:function(e,t){var n={None:function(e,t){return r.extend(e,{_sig:this.encrypt(e,o.setting.none_append_word)})},RegisteredDevice:function(e,t){return r.extend(e,{_sig:this.encrypt(e,o.setting.none_append_word)})},UserLogin:function(e,t){return r.extend(e,{_sig:this.encrypt(e,o.setting.none_append_word)})}};if(r.isFunction(n[this.api.SECURITY_TYPE])){r.each(e,function(t,n,i){(r.isUndefined(t)||r.isNull(t))&&delete e[n]});var i=r.extend(e,o.setting.default_header);i=r.extend(i,{_aid:p._aid});var s=n[this.api.SECURITY_TYPE].call(this,i,t);return r.extend(i,s)}return e},request:function(e,t){var r=n.Deferred(),i=this;return n.ajax({url:o.setting.api.url,type:"post",data:i.sign(e),crossDomain:!0,xhrFields:{withcredentials:!0},fixture:i.fixture}).done(function(n){n&&n.stat&&(i.serverTime=n.stat.systime),i.access(n,t)?(i.afterRequest(e._mt,n.content[0]),r.resolve(n.content[0])):n.stat.stateList.length==0?(n.stat.code==l,n.stat.code==f&&i.goToLogin(),r.reject(n.stat.code)):r.reject(n.stat.stateList[0].code,n.stat.stateList[0].msg)}).fail(function(e){r.reject(e)}),r},getServerTime:function(){return this.serverTime},afterRequest:function(t,n){var i={"member.login":function(t){e.cookie(p._aid+"_tk",t.token,{path:"/",domain:".ucaiyuan.com"})},"member.register":function(t){e.cookie(p._aid+"_tk",t.token,{path:"/",domain:".ucaiyuan.com"})}};r.isFunction(i[t])&&i[t].call(this,n)},ajax:function(e){return n.ajax(e)}});return p.register=function(e){this._aid=e},p}),define("ulife.module.lazyload",["can","underscore","imglazyload","ulife.framework.comm"],function(e,t,n,r){r.register(1);var i=e.Control.extend({init:function(e,t){$(".img-lazyload").imglazyload()}});new i}),require(["ulife.module.lazyload"]);